sequenceDiagram
    participant Client
    participant Auth as Auth Service
    participant NotifClient as NotificationClient
    participant NotifService as Notification Service
    participant Redis
    participant DB as PostgreSQL

    Note over Client, NotifService: Step 1: Request OTP
    Client->>Auth: POST /auth/password-reset/otp (Email)
    Auth->>NotifClient: sendOtp(Email, PASSWORD_RESET)
    NotifClient->>NotifService: POST /notifications/otp
    NotifService->>Redis: Store OTP (10 min expiry)
    NotifService-->>Client: OTP Sent via Email

    Note over Client, DB: Step 2: Reset Password with OTP
    Client->>Auth: POST /auth/password-reset/reset (Email, NewPass, OTP)
    Auth->>NotifClient: validateOtp(Email, OTP)
    NotifClient->>NotifService: POST /notifications/otp/validate
    NotifService->>Redis: Check & Delete OTP
    Redis-->>NotifService: Valid/Invalid
    NotifService-->>NotifClient: Boolean
    NotifClient-->>Auth: Boolean Result
    
    alt is OTP Valid
        Auth->>DB: Update User Password
        Auth-->>Client: 200 OK (Success)
    else is OTP Invalid
        Auth-->>Client: 400 Bad Request (Invalid OTP)
    end